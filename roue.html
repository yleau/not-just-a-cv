<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Career Mode - The Wheel</title>
    <style>
        /* --- DESIGN & COULEURS --- */
        :root {
            --vert: #8EDF90;
            --rouge: #FB9292;
            --bleu: #92B5FB;
            --marron: #C19E86;
            --violet: #A0A0D9;
            --bg-color: #f0f4f8;
            --text-color: #333;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #fdfbfb 0%, #ebedee 100%);
            margin: 0;
            height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }

        /* LOGO */
        .logo-container {
            position: absolute;
            top: 20px;
            left: 20px;
            z-index: 10;
        }

        /* CONTENEUR ROUE */
        .wheel-container {
            position: relative;
            width: 500px;
            height: 500px;
            filter: drop-shadow(0 10px 15px rgba(0,0,0,0.2));
            cursor: pointer;
            transition: transform 0.2s;
        }

        .wheel-container:active { transform: scale(0.98); }

        canvas {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            border: 8px solid white;
        }

        /* POINTEUR */
        .pointer {
            position: absolute;
            top: -20px;
            left: 50%;
            transform: translateX(-50%);
            width: 0; 
            height: 0; 
            border-left: 20px solid transparent;
            border-right: 20px solid transparent;
            border-top: 40px solid #2C3E50;
            z-index: 5;
            filter: drop-shadow(0 2px 4px rgba(0,0,0,0.3));
        }

        /* BOUTON SPIN */
        .spin-btn {
            position: absolute;
            top: 51.5%; left: 51.5%;
            transform: translate(-50%, -50%);
            width: 60px; height: 60px;
            background: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: #2C3E50;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
            font-size: 0.8rem;
            pointer-events: none;
        }

        /* --- POPUP DE RÃ‰SULTAT (MODAL) --- */
        .modal {
            display: none;
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background: rgba(0,0,0,0.6);
            z-index: 100;
            justify-content: center;
            align-items: center;
            backdrop-filter: blur(5px);
        }

        .modal-content {
            background: white;
            padding: 40px;
            border-radius: 20px;
            text-align: center;
            max-width: 85%;
            width: 350px;
            box-shadow: 0 20px 25px rgba(0,0,0,0.2);
            animation: popIn 0.3s ease-out;
            border-top: 15px solid var(--violet);
        }

        @keyframes popIn {
            from { transform: scale(0.5); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }

        /* Style des textes du Popup */
        #resultType {
            margin-top: 0;
            margin-bottom: 5px;
            color: #2C3E50;
            font-size: 1rem;
            text-transform: uppercase;
            letter-spacing: 2px;
            opacity: 0.7;
        }

        #resultName {
            font-size: 2rem;
            margin: 0 0 15px 0;
            font-weight: 900;
            color: #333;
        }

        #resultDesc {
            font-size: 1.1rem;
            color: #555;
            margin-bottom: 30px;
            line-height: 1.4;
            font-style: italic;
        }

        .close-btn {
            background: #2C3E50;
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 50px;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            transition: background 0.3s;
        }

        .close-btn:hover { background: #1a252f; }

        /* Responsive */
        @media (max-width: 500px) {
            .wheel-container { width: 300px; height: 300px; }
            .logo-text { font-size: 1rem; }
            #resultName { font-size: 1.5rem; }
        }
    </style>
</head>
<body>

    <div class="logo-container">
        <img src="logo.svg" alt="Logo" style="height: 100px; width: 100px; position: absolute; top: 0px;">
    </div>

    <div class="wheel-container" onclick="spinWheel()">
        <div class="pointer"></div>
        <canvas id="wheelCanvas" width="500" height="500"></canvas>
        <div class="spin-btn">SPIN</div>
    </div>

    <div id="resultModal" class="modal">
        <div class="modal-content" id="modalCard">
            <h3 id="resultType">TYPE</h3>
            <h1 id="resultName">NAME</h1>
            <p id="resultDesc">Description...</p>
            
            <button class="close-btn" onclick="closeModal()">CONTINUE</button>
        </div>
    </div>

    <script>
        const canvas = document.getElementById('wheelCanvas');
        const ctx = canvas.getContext('2d');
        const size = 500;
        const centerX = size / 2;
        const centerY = size / 2;
        const radius = size / 2;

        const colors = {
            bonus: '#8EDF90',   // Vert
            malus: '#FB9292',   // Rouge
            special: '#92B5FB', // Bleu
            neutral: '#C19E86'  // Jaune
        };

        // --- SEGMENTS : text = Sur la roue / desc = Dans le popup ---
        const segments = [
            { 
                text: "Promotion", 
                type: "BONUS", 
                color: colors.bonus,
                desc: "You may ask an opponent for a card even if you do not have any members of that family."
            },
            { 
                text: "Burnout", 
                type: "MALUS", 
                color: colors.malus,
                desc: "You are exhausted. Skip your turn immediately."
            },
            { 
                text: "Productivity", 
                type: "BONUS", 
                color: colors.bonus,
                desc: "Draw 2 cards from the deck instead of asking someone for a card."
            },
            { 
                text: "Team Building", 
                type: "SPECIAL", 
                color: colors.special,
                desc: "Everyone gives 1 card from their hand to the player on their left."
            },
            { 
                text: "Budget Cuts", 
                type: "MALUS", 
                color: colors.malus,
                desc: "You must return one of your cards (of your choice) to the bottom of the deck."
            },
            { 
                text: "Headhunter", 
                type: "BONUS", 
                color: colors.bonus,
                desc: "Steal a random card from the hand of the player of your choice."
            },
            { 
                text: "Coffee Break", 
                type: "NEUTRAL", 
                color: colors.neutral,
                desc: "Nothing happens. Relax and proceed to the interview."
            },
            { 
                text: "Wifi Down", 
                type: "MALUS", 
                color: colors.malus,
                desc: "Communication error! You cannot ask for a card. Just draw one card and end turn."
            },
            { 
                text: "CEO's Favorite", 
                type: "BONUS", 
                color: colors.bonus,
                desc: "Great job! Immediately replay a complete turn."
            },
            { 
                text: "Audit", 
                type: "SPECIAL", 
                color: colors.special,
                desc: "Name a family. All players with a card from that family must raise their hand."
            }
        ];

        let currentAngle = 0;
        let isSpinning = false;
        const arc = 2 * Math.PI / segments.length;

        function drawWheel() {
            ctx.clearRect(0, 0, size, size);

            segments.forEach((segment, i) => {
                const angle = currentAngle + i * arc;
                ctx.beginPath();
                ctx.fillStyle = segment.color;
                ctx.moveTo(centerX, centerY);
                ctx.arc(centerX, centerY, radius, angle, angle + arc);
                ctx.lineTo(centerX, centerY);
                ctx.fill();
                ctx.strokeStyle = "white";
                ctx.lineWidth = 4;
                ctx.stroke();

                ctx.save();
                ctx.translate(centerX, centerY);
                ctx.rotate(angle + arc / 2);
                ctx.textAlign = "right";
                ctx.fillStyle = "#333";
                ctx.font = "bold 24px Arial";
                // ICI: On dessine seulement le 'text' (Le Nom), pas la 'desc'
                ctx.fillText(segment.text, radius - 20, 10);
                ctx.restore();
            });
        }

        function spinWheel() {
            if (isSpinning) return;
            isSpinning = true;
            const spinDuration = 3000;
            const randomSpin = Math.floor(Math.random() * 360) + 360 * 5;
            const startAngle = currentAngle;
            let startTime = null;

            function animate(timestamp) {
                if (!startTime) startTime = timestamp;
                const progress = timestamp - startTime;
                const easeOut = (t) => 1 - Math.pow(1 - t, 3);
                const percent = Math.min(progress / spinDuration, 1);
                
                currentAngle = startAngle + (randomSpin * Math.PI / 180) * easeOut(percent);
                drawWheel();

                if (progress < spinDuration) {
                    requestAnimationFrame(animate);
                } else {
                    isSpinning = false;
                    showResult();
                }
            }
            requestAnimationFrame(animate);
        }

        function showResult() {
            const actualAngle = (currentAngle % (2 * Math.PI));
            const index = Math.floor((2 * Math.PI - (actualAngle + Math.PI / 2) % (2 * Math.PI)) / arc) % segments.length;
            
            const winner = segments[index];

            const modal = document.getElementById('resultModal');
            const type = document.getElementById('resultType');
            const name = document.getElementById('resultName');
            const desc = document.getElementById('resultDesc');
            const card = document.getElementById('modalCard');

            // C'est ici qu'on injecte la description pour l'affichage
            type.innerText = winner.type;
            name.innerText = winner.text;
            desc.innerText = winner.desc; 
            
            card.style.borderTopColor = winner.color;
            name.style.color = winner.color === colors.neutral ? '#d4ac0d' : winner.color;

            modal.style.display = 'flex';
        }

        function closeModal() {
            document.getElementById('resultModal').style.display = 'none';
        }

        drawWheel();
    </script>
</body>
</html>


